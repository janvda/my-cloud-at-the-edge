{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"My Cloud at the edge","text":""},{"location":"#what","title":"What ?","text":"<p>A description of the setup of my cloud at the edge = </p> <ul> <li>a set of raspberry pi devices and intel NUC devices </li> <li>in my home LAN</li> <li>running docker</li> <li>which are managed from my MacBook.</li> </ul> <p>This will be covered in several topics</p> <ul> <li>with focus on my practical experience</li> <li>that are energy and budget friendly</li> <li>(mainly) make use of open source software</li> </ul> <p>The different (planned) sessions and topics can be found in the top menu bar.</p>"},{"location":"#why","title":"Why ?","text":"<ul> <li>inspire and help others to create their own private cloud at the edge</li> <li>learn about cloud concepts (docker, containers, images, ...), networking, ...</li> </ul>"},{"location":"sessions/session_1/","title":"Session 1: Intro &amp; Networking","text":""},{"location":"sessions/session_1/#agenda-proposal","title":"Agenda (Proposal)","text":"<ol> <li>About me</li> <li>What and Why ?</li> <li>Site Structure</li> <li>Networking<ol> <li>OpenWrt Router</li> <li>OpenWrt Access Point</li> </ol> </li> <li>Devices<ol> <li>Raspberry Pi</li> <li>Intel Nuc</li> </ol> </li> </ol>"},{"location":"sessions/session_2/","title":"Session 2: (under construction)","text":""},{"location":"sessions/session_2/#agenda-proposal","title":"Agenda (Proposal)","text":"<p>TODO</p>"},{"location":"topics/intel_nuc/","title":"Intel Nuc","text":"<p>TODO</p>"},{"location":"topics/openwrt_access_point/","title":"My OpenWrt Access Point","text":""},{"location":"topics/openwrt_access_point/#router-model","title":"Router Model","text":"<p>Model : TP-Link Archer C6 dual-band Gigabit WLAN router (867Mbit / s 5GHz + 300Mbit / s 2.4GHz, 4 Gigabit LAN port, Mu-MIMO, IPTV, VPN, 4 external antennas) black</p> <p>Price: 42 \u20ac (march 2020)</p> <p>Memory: 120 MB</p> <p>Architecture: Qualcomm Atheros QCA956X ver 1 rev 0</p> <p></p>"},{"location":"topics/openwrt_access_point/#flashed-with-openwrt","title":"Flashed with OpenWrt","text":"<p>Firmware version : <code>OpenWrt 21.02.0 r16279-5cc0535800 / LuCI openwrt-21.02 branch git-21.231.26241-422c175</code></p>"},{"location":"topics/openwrt_access_point/#location-in-my-home-network","title":"Location in my home network","text":""},{"location":"topics/openwrt_access_point/#why","title":"Why ?","text":"<ol> <li>My OpenWRT router doesn't provide WiFi coverage up to 1st floor and 2nd floor.</li> <li>Time scheduled controlled WiFi Access of my kids</li> </ol>"},{"location":"topics/openwrt_access_point/#configuration","title":"Configuration","text":""},{"location":"topics/openwrt_router/","title":"My OpenWrt Router","text":""},{"location":"topics/openwrt_router/#router-model","title":"Router Model","text":"<p>Model : TP-Link Archer C7 Dual Band Gigabit WiFi-router (1300 Mbps (5 GHz) + 450 Mbps (2,4 GHz), 5 Gigabit LAN-port, 1 USB 2.0-port) Black</p> <p>Price: 56 \u20ac (nov 2021)</p> <p>Memory: 120 MB</p> <p>Architecture: Qualcomm Atheros QCA956X ver 1 rev 0</p> <p></p>"},{"location":"topics/openwrt_router/#flashed-with-openwrt","title":"Flashed with OpenWrt","text":"<p>Firmware version : <code>OpenWrt 21.02.0 r16279-5cc0535800 / LuCI openwrt-21.02 branch git-21.231.26241-422c175</code></p> <p>The OpenWrt Project is a Linux operating system targeting embedded devices (typically wireless routers).</p> <p>Tip: Assure you buy a router that is in the list of OpenWrt supported devices.</p>"},{"location":"topics/openwrt_router/#location-in-my-home-network","title":"Location in my home network","text":""},{"location":"topics/openwrt_router/#why","title":"Why ?","text":"<ol> <li>Flashing a router with OpenWrt was on my nerd bucketlist</li> <li>Learn about routers, networking and OpenWrt</li> <li>Have full control to configure your home network<ul> <li>This is especially relevant if your ISP modem doesn't allow to configure all things</li> </ul> </li> <li>Makes it easier to switch to new ISP or new ISP modem (e.g. switch from ADSL to fiber)</li> <li>Maybe to get better WiFi  (as your are using the WiFi of the OpenWrt Router iso of the ISP modem)</li> </ol>"},{"location":"topics/openwrt_router/#configuration","title":"Configuration","text":"<p>I don't remember everything I did 2 years ago, but a lot of information can be found at:</p> <ul> <li>openwrt.org</li> <li>openwrt forum</li> </ul> Think twice before activating any changes that might make your router inaccessible ! <p>It is of course possible to make changes so that you can't access your OpenWrt router anymore from any device.  In that case it is also not possible to correct the issue without doing a <code>reset</code> and  start all over.  (It happened me once)</p> <p>The configurations described below can also be performed on most routers/ISP modems !</p>"},{"location":"topics/openwrt_router/#ignored-ipv6","title":"ignored IPv6","text":"<p>I ignored IPv6 configuration. IPv4 is sufficient for me.</p>"},{"location":"topics/openwrt_router/#gui","title":"GUI","text":"<p>OpenWrt comes with a very nice GUI. Almost everything can be configured by this GUI.</p> <p>DEMO OpenWrt GUI (LuCi)</p>"},{"location":"topics/openwrt_router/#configure-routing-network","title":"Configure routing / network","text":"<p>The main configuration steps (as I remember it) to setup my <code>192.168.2.0/24</code> network</p>"},{"location":"topics/openwrt_router/#configure-networkinterfaces","title":"Configure Network&gt;Interfaces","text":""},{"location":"topics/openwrt_router/#firewall-configuration","title":"Firewall configuration","text":"<p>Below settings opens firewall in both directions + enables masquerading in both directions.</p> <ul> <li>allows to ping from OpenWrt Router LAN to ISP modem LAN</li> <li>allows to access the internet from OpenWrt Router LAN</li> <li>doesn't allow to ping OpenWrt Router LAN from ISP modem LAN</li> <li>allows to access OpenWrt Router via its ISP modem LAN IP address (http://192.168.1.56)</li> </ul> <p></p>"},{"location":"topics/openwrt_router/#configure-ipv4-routes","title":"Configure IPv4-Routes","text":"<p>The routes can be configured via menu <code>Status &gt; Routes</code>.  The relevant IPv4 routes are put in a red box.</p> <p>I think that I didn't configure those routes, by default they were properly setup.</p> <p></p>"},{"location":"topics/openwrt_router/#configure-static-leases","title":"Configure Static Leases","text":"<p>Instead of working with <code>/etc/hosts</code> files and configuring static IP addresses for each device, you can also define static leases (DHCP).  So the DHCP server of the router will automatically assign a static IP address and hostname based on the MAC address.</p> <p></p> DEMO OpenWrt Static Leases configuration <p>Demo the assignment of a static lease</p> Some devices (e.g. iphones) change MAC address each time they connect. <p>So this approach of static leases only works if the MAC address doesn't change. For iphone it is possible to configure that it has to use a fixed MAC address for a specific wifi network (disable setting <code>Private Wi-Fi Address</code>)</p>"},{"location":"topics/openwrt_router/#configure-local-domain-lan","title":"Configure Local domain <code>.lan</code>","text":"<p>The below settings will set the local domain to <code>.lan</code>.  So the full name of the hosts defined by the static leases is <code>&lt;hostname&gt;.lan</code> (e.g. <code>nuc1.lan</code>)</p> <p></p> <p>Here below a log of <code>hostname</code> and <code>ping nuc1</code> command entered in a terminal window on my mac-book connected to my home network.  The hostname, domain and ip address are all configured in my OpenWrt router (see above).</p> <pre><code>mac-jan:tmp jan$ hostname\nmac-jan.lan\nmac-jan:tmp jan$ ping nuc1\nPING nuc1.lan (192.168.2.11): 56 data bytes\n64 bytes from 192.168.2.11: icmp_seq=0 ttl=64 time=35.316 ms\n64 bytes from 192.168.2.11: icmp_seq=1 ttl=64 time=3.348 ms\n</code></pre>"},{"location":"topics/openwrt_router/#conclusion","title":"Conclusion","text":"<p>The outcome of this configuration:</p> <ul> <li>I have created my own <code>192.168.2.0/24</code> home network (domain <code>.lan</code>)</li> <li>All (relevant) devices automatically get a static IPv4 address and a hostname via DHCP</li> <li>each device in my home network can reach any of the other devices in my home network by just using its hostname (or hostname<code>.lan</code>)</li> <li>All of this is configured on my OpenWRT router<ul> <li>so no specific configuration (E.g. <code>/etc/hosts</code>) is needed on any of the devices in my home network.</li> </ul> </li> </ul> <p>OpenWrt has a ton of features and additional software packages that I didn't use.</p>"},{"location":"topics/raspberry_pi/","title":"Raspberry Pi","text":"<p>TODO</p>"}]}